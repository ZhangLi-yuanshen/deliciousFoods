<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<meta http-equiv="pragma" content="no-cache" />
	<meta http-equiv="content-type" content="no-cache, must-revalidate" />
	<meta http-equiv="expires" content="Wed, 26 Feb 1997 08:21:57 GMT"/>
	<title>个人信息</title>

	<link href="../css/bootstrap.min.css" rel="stylesheet"/>
	<link href="../css/font-awesome.css" rel="stylesheet"/>
	<link href="../css/basic.css" rel="stylesheet"/>
	<link href="../css/custom.css" rel="stylesheet"/>
	<link href="../css/element/index.css" rel="stylesheet"/>

	<style>
		[v-cloak] {
			display: none;
		}
	</style>
</head>
<body>
<div id="wrapper">
	<nav class="navbar navbar-default navbar-cls-top " role="navigation" style="margin-bottom: 0">
		<div class="navbar-header">
			<a class="navbar-brand" href="index.html">后端管理系统</a>
		</div>

		<div class="header-right">
			<a href="javascript:void(0)" class="btn btn-info" id="logoutBtn" title="退出登录">
				<i class="fa fa-sign-out fa-2x"></i>
			</a>
		</div>

		<div class="header-right">
			<a href="javascript:void(0)" class="btn btn-info" id="personalPageBtn" title="跳转到个人信息">
				<i class="fa fa-user fa-2x"></i>
			</a>
		</div>

		<div class="header-right" style="padding-top: 25px">欢迎你，<span id="userName"></span></div>

		<div class="header-left">
			<a href="/front/index.html" class="btn btn-info" title="跳转到首页">
				<i class="fa fa-dot-circle-o fa-2x"></i>
			</a>
		</div>
	</nav>

	<nav class="navbar-default navbar-side" role="navigation">
		<div class="sidebar-collapse">
			<ul class="nav" id="main-menu">
				<li>
					<a href="index.html"><i class="fa fa-dashboard"></i>系统首页</a>
				</li>
				<li>
					<a href="#"><i class="fa fa-yelp "></i>信息展示 <span class="fa arrow"></span></a>
					<ul class="nav nav-second-level collapse in" id="sidebar">
						<!-- Dynamic menu items will be inserted here -->
						<li>
							<a href="javascript:void(0)" class="active-menu" id="personalPageLink"><i class="fa fa-user"></i>个人信息</a>
						</li>
					</ul>
				</li>
				<li>
					<a href="updatePassword.html"><i class="fa fa-unlock-alt"></i>修改密码</a>
				</li>
				<li>
					<a href="javascript:void(0)" id="logoutLink"><i class="fa fa-power-off"></i>退出登录</a>
				</li>
			</ul>
		</div>
	</nav>

	<div id="page-wrapper">
		<div id="page-inner">
			<div class="row">
				<div class="col-md-12">
					<h1 class="page-subhead-line">这是个人信息页，可以对自己的信息进行修改。 </h1>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12">
					<div class="panel panel-default">
						<div class="panel-heading">
							个人信息
						</div>
						<div class="panel-body">
							<form class="form-horizontal">
								<input type="hidden" id="userId">
								<div class="form-group">
									<label class="col-sm-3 control-label">姓名</label>
									<div class="col-sm-7">
										<input type="text" class="form-control" id="name" placeholder="请输入姓名">
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-3 control-label">昵称</label>
									<div class="col-sm-7">
										<input type="text" class="form-control" id="nickName" placeholder="请输入昵称">
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-3 control-label">性别</label>
									<div class="col-sm-7">
										<label class="radio-inline">
											<input type="radio" value="男" name="sex" id="sexMale">男
										</label>
										<label class="radio-inline">
											<input type="radio" value="女" name="sex" id="sexFemale">女
										</label>
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-3 control-label">年龄</label>
									<div class="col-sm-7">
										<input type="text" class="form-control" id="age" placeholder="请输入年龄">
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-3 control-label">生日</label>
									<div class="col-sm-7">
										<div class="block">
											<input type="text" class="form-control" id="birthday" placeholder="选择日期时间">
										</div>
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-3 control-label">手机号</label>
									<div class="col-sm-7">
										<input type="text" class="form-control" id="phone" placeholder="请输入手机号">
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-3 control-label">地址</label>
									<div class="col-sm-7">
										<input type="text" class="form-control" id="address" placeholder="请输入地址">
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-3 control-label">编号</label>
									<div class="col-sm-7">
										<input type="text" class="form-control" id="code" placeholder="请输入编号">
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-3 control-label">邮箱</label>
									<div class="col-sm-7">
										<input type="text" class="form-control" id="email" placeholder="请输入邮箱">
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-3 control-label">身份证</label>
									<div class="col-sm-7">
										<input type="text" class="form-control" id="cardId" placeholder="请输入身份证">
									</div>
								</div>

							</form>
							<div style="text-align: center">
								<button type="button" class="btn btn-primary" id="saveBtn">保存</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script src="../js/jquery-1.10.2.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/jquery.metisMenu.js"></script>
<script src="../js/custom.js"></script>
<script src="../js/my.js"></script>
<script src="../js/element/index.js"></script>

<script>
	function msg(type, msg) {
		// 显示消息
		alert(msg);  // 简化的消息弹窗，可以换成更复杂的提示框。
	}

	$(document).ready(function () {
		// 获取当前用户信息
		$.get("/getAccountInfo", function (res) {
			if (res.code === '0') {
				var user = res.data;
				$('#userId').val(user.id);
				$('#name').val(user.name);
				$('#nickName').val(user.nickName);
				$('input[name="sex"][value="' + user.sex + '"]').prop('checked', true);
				$('#age').val(user.age);
				$('#birthday').val(user.birthday);
				$('#phone').val(user.phone);
				$('#address').val(user.address);
				$('#code').val(user.code);
				$('#email').val(user.email);
				$('#cardId').val(user.cardId);
				$('#userName').text(user.name);
			} else {
				msg('error', res.msg);
			}
		});

		// 保存更新
		$('#saveBtn').click(function () {
			var updatedData = {
				id: $('#userId').val(),
				name: $('#name').val(),
				nickName: $('#nickName').val(),
				sex: $('input[name="sex"]:checked').val(),
				age: $('#age').val(),
				birthday: $('#birthday').val(),
				phone: $('#phone').val(),
				address: $('#address').val(),
				code: $('#code').val(),
				email: $('#email').val(),
				cardId: $('#cardId').val()
			};

			$.ajax({
				url: "/adminInfo",
				type: "PUT",
				data: updatedData,
				success: function (res) {
					if (res.code === '0') {
						msg('success', '更新成功');
					} else {
						msg('error', res.msg);
					}
				}
			});
		});

		// 退出登录
		$('#logoutBtn').click(function () {
			// 处理退出登录的功能
			logout();
		});

		// 跳转到个人信息
		$('#personalPageBtn').click(function () {
			window.location.href = 'personalPage.html';
		});
	});
</script>

</body>
</html>
